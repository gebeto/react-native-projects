
		<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0">
		<link rel="stylesheet" type="text/css" href="./styles.css">
		<link rel="stylesheet" type="text/css" href="./prism.css">
		<script src="./prism.js"></script>
		</head><body><div class="page__inner"><main class="main main_width-limit"><article itemscope="" itemtype="http://schema.org/TechArticle"><meta content="Циклы while, for" itemprop="name"><div itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta content="iliakan@gmail.com" itemprop="email"><meta content="Ilya Kantor" itemprop="name"/></meta></div><div itemprop="articleBody"><p>При написании скриптов зачастую встает задача сделать однотипное действие много раз.</p>
<p>Например, вывести товары из списка один за другим. Или просто перебрать все числа от 1 до 10 и для каждого выполнить одинаковый код.</p>
<p>Для многократного повторения одного участка кода – предусмотрены <em>циклы</em>.</p>
<cut>
<h2><a class="main__anchor" href="#цикл-while" name="цикл-while">Цикл while</a></h2><p>Цикл <code>while</code> имеет вид:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">while (условие) {
  // код, тело цикла
}</code></pre>
</div>
</div>
</div><p>Пока <code>условие</code> верно – выполняется код из тела цикла.</p>
<p>Например, цикл ниже выводит <code>i</code> пока <code>i &lt; 3</code>:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var i = 0;
while (i &lt; 3) {
  alert( i );
  i++;
}</code></pre>
</div>
</div>
</div><p><strong>Повторение цикла по-научному называется <em>«итерация»</em>. Цикл в примере выше совершает три итерации.</strong></p>
<p>Если бы <code>i++</code> в коде выше не было, то цикл выполнялся бы (в теории) вечно. На практике, браузер выведет сообщение о «зависшем» скрипте и посетитель его остановит.</p>
<p><strong>Бесконечный цикл</strong> можно сделать и проще:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">while (true) {
  // ...
}</code></pre>
</div>
</div>
</div><p><strong>Условие в скобках интерпретируется как логическое значение, поэтому вместо <code>while (i!=0)</code> обычно пишут <code>while (i)</code></strong>:</p>
<div class="code-example" data-highlight-block="1-1" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var i = 3;
while (i) { // при i, равном 0, значение в скобках будет false и цикл остановится
  alert( i );
  i--;
}</code></pre>
</div>
</div>
</div><h2><a class="main__anchor" href="#цикл-do-while" name="цикл-do-while">Цикл do…while</a></h2><p>Проверку условия можно поставить <em>под</em> телом цикла, используя специальный синтаксис <code>do..while</code>:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">do {
  // тело цикла
} while (условие);</code></pre>
</div>
</div>
</div><p>Цикл, описанный, таким образом, сначала выполняет тело, а затем проверяет условие.</p>
<p>Например:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var i = 0;
do {
  alert( i );
  i++;
} while (i &lt; 3);</code></pre>
</div>
</div>
</div><p>Синтаксис <code>do..while</code> редко используется, т.к. обычный <code>while</code> нагляднее – в нём не приходится искать глазами условие и ломать голову, почему оно проверяется именно в конце.</p>
<h2><a class="main__anchor" href="#цикл-for" name="цикл-for">Цикл for</a></h2><p>Чаще всего применяется цикл <code>for</code>. Выглядит он так:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">for (начало; условие; шаг) {
  // ... тело цикла ...
}</code></pre>
</div>
</div>
</div><p>Пример цикла, который выполняет <code>alert(i)</code> для <code>i</code> от <code>0</code> до <code>2</code> включительно (до <code>3</code>):</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var i;

for (i = 0; i &lt; 3; i++) {
  alert( i );
}</code></pre>
</div>
</div>
</div><p>Здесь:</p>
<ul>
<li><strong>Начало:</strong> <code>i=0</code>.</li>
<li><strong>Условие:</strong> <code>i&lt;3</code>.</li>
<li><strong>Шаг:</strong> <code>i++</code>.</li>
<li><strong>Тело:</strong> <code>alert(i)</code>, т.е. код внутри фигурных скобок (они не обязательны, если только одна операция)</li>
</ul>
<p>Цикл выполняется так:</p>
<ol>
<li>Начало: <code>i=0</code> выполняется один-единственный раз, при заходе в цикл.</li>
<li>Условие: <code>i&lt;3</code> проверяется перед каждой итерацией и при входе в цикл, если оно нарушено, то происходит выход.</li>
<li>Тело: <code>alert(i)</code>.</li>
<li>Шаг: <code>i++</code> выполняется после <em>тела</em> на каждой итерации, но перед проверкой условия.</li>
<li>Идти на шаг 2.</li>
</ol>
<p>Иными словами, поток выполнения: <code>начало</code> → (если <code>условие</code> → <code>тело</code> → <code>шаг</code>) → (если <code>условие</code> → <code>тело</code> → <code>шаг</code>) → … и так далее, пока верно <code>условие</code>.</p>
<div class="important important_smart">
<div class="important__header"><span class="important__type">На заметку:</span></div>
<div class="important__content"><p>В цикле также можно определить переменную:</p>
<div class="code-example" data-highlight-inline="0:5-8" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">for (var i = 0; i &lt; 3; i++) {
  alert(i); // 0, 1, 2
}</code></pre>
</div>
</div>
</div><p>Эта переменная будет видна и за границами цикла, в частности, после окончания цикла <code>i</code> станет равно <code>3</code>.</p>
</div></div>
<h2><a class="main__anchor" href="#пропуск-частей-for" name="пропуск-частей-for">Пропуск частей for</a></h2><p>Любая часть <code>for</code> может быть пропущена.</p>
<p>Например, можно убрать <code>начало</code>. Цикл в примере ниже полностью идентичен приведённому выше:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var i = 0;

for (; i &lt; 3; i++) {
  alert( i ); // 0, 1, 2
}</code></pre>
</div>
</div>
</div><p>Можно убрать и <code>шаг</code>:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var i = 0;

for (; i &lt; 3;) {
  alert( i );
  // цикл превратился в аналог while (i&lt;3)
}</code></pre>
</div>
</div>
</div><p>А можно и вообще убрать всё, получив бесконечный цикл:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">for (;;) {
  // будет выполняться вечно
}</code></pre>
</div>
</div>
</div><p>При этом сами точки с запятой <code>;</code> обязательно должны присутствовать, иначе будет ошибка синтаксиса.</p>
<div class="important important_smart">
<div class="important__header"><span class="important__type"><code>for..in</code></span></div>
<div class="important__content"><p>Существует также специальная конструкция <code>for..in</code> для перебора свойств объекта.</p>
<p>Мы познакомимся с ней позже, когда будем <a href="/object-for-in#for..in">говорить об объектах</a>.</p>
</div></div>
<h2><a class="main__anchor" href="#прерывание-цикла-break" name="прерывание-цикла-break">Прерывание цикла: break</a></h2><p>Выйти из цикла можно не только при проверке условия но и, вообще, в любой момент. Эту возможность обеспечивает директива <code>break</code>.</p>
<p>Например, следующий код подсчитывает сумму вводимых чисел до тех пор, пока посетитель их вводит, а затем – выдаёт:</p>
<div class="code-example" data-highlight-block="6-6" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var sum = 0;

while (true) {

  var value = +prompt("Введите число", '');

  if (!value) break; // (*)

  sum += value;

}
alert( 'Сумма: ' + sum );</code></pre>
</div>
</div>
</div><p>Директива <code>break</code> в строке <code>(*)</code>, если посетитель ничего не ввёл, полностью прекращает выполнение цикла и передаёт управление на строку за его телом, то есть на <code>alert</code>.</p>
<p>Вообще, сочетание «бесконечный цикл + break» – отличная штука для тех ситуаций, когда условие, по которому нужно прерваться, находится не в начале-конце цикла, а посередине.</p>
<h2><a class="main__anchor" href="#continue" name="continue">Следующая итерация: continue</a></h2><p>Директива <code>continue</code> прекращает выполнение <em>текущей итерации</em> цикла.</p>
<p>Она – в некотором роде «младшая сестра» директивы <code>break</code>: прерывает не весь цикл, а только текущее выполнение его тела, как будто оно закончилось.</p>
<p>Её используют, если понятно, что на текущем повторе цикла делать больше нечего.</p>
<p>Например, цикл ниже использует <code>continue</code>, чтобы не выводить чётные значения:</p>
<div class="code-example" data-highlight-inline="2:2-27" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">for (var i = 0; i &lt; 10; i++) {

  if (i % 2 == 0) continue;

  alert(i);
}</code></pre>
</div>
</div>
</div><p>Для чётных <code>i</code> срабатывает <code>continue</code>, выполнение тела прекращается и управление передаётся на следующий проход <code>for</code>.</p>
<div class="important important_smart">
<div class="important__header"><span class="important__type">Директива <code>continue</code> позволяет обойтись без скобок</span></div>
<div class="important__content"><p>Цикл, который обрабатывает только нечётные значения, мог бы выглядеть так:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">for (var i = 0; i &lt; 10; i++) {

  if (i % 2) {
    alert( i );
  }

}</code></pre>
</div>
</div>
</div><p>С технической точки зрения он полностью идентичен. Действительно, вместо <code>continue</code> можно просто завернуть действия в блок <code>if</code>. Однако, мы получили дополнительный уровень вложенности фигурных скобок. Если код внутри <code>if</code> более длинный, то это ухудшает читаемость, в отличие от варианта с <code>continue</code>.</p>
</div></div>
<div class="important important_warn">
<div class="important__header"><span class="important__type">Нельзя использовать break/continue справа от оператора „?“</span></div>
<div class="important__content"><p>Обычно мы можем заменить <code>if</code> на оператор вопросительный знак <code>'?'</code>.</p>
<p>То есть, запись:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">if (условие) {
  a();
} else {
  b();
}</code></pre>
</div>
</div>
</div><p>…Аналогична записи:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">условие ? a() : b();</code></pre>
</div>
</div>
</div><p>В обоих случаях в зависимости от условия выполняется либо <code>a()</code> либо <code>b()</code>.</p>
<p>Но разница состоит в том, что оператор вопросительный знак <code>'?'</code>, использованный во второй записи, возвращает значение.</p>
<p><strong>Синтаксические конструкции, которые не возвращают значений, нельзя использовать в операторе <code>'?'</code>.</strong></p>
<p>К таким относятся большинство конструкций и, в частности, <code>break/continue</code>.</p>
<p>Поэтому такой код приведёт к ошибке:</p>
<div class="code-example" data-highlight-inline="0:21-29" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">(i &gt; 5) ? alert(i) : continue;</code></pre>
</div>
</div>
</div><p>Впрочем, как уже говорилось ранее, оператор вопросительный знак <code>'?'</code> не стоит использовать таким образом. Это – всего лишь ещё одна причина, почему для проверки условия предпочтителен <code>if</code>.</p>
</div></div>
<h2><a class="main__anchor" href="#метки-для-break-continue" name="метки-для-break-continue">Метки для break/continue</a></h2><p>Бывает нужно выйти одновременно из нескольких уровней цикла.</p>
<p>Например, внутри цикла по <code>i</code> находится цикл по <code>j</code>, и при выполнении некоторого условия мы бы хотели выйти из обоих циклов сразу:</p>
<div class="code-example" data-highlight-inline="0:0-6,8:16-27" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">outer: for (var i = 0; i &lt; 3; i++) {

  for (var j = 0; j &lt; 3; j++) {

    var input = prompt('Значение в координатах '+i+','+j, '');

    // если отмена ввода или пустая строка -
    // завершить оба цикла
    if (!input) break outer; // (*)

  }
}
alert('Готово!');</code></pre>
</div>
</div>
</div><p>В коде выше для этого использована <em>метка</em>.</p>
<p>Метка имеет вид <code>"имя:"</code>, имя должно быть уникальным. Она ставится перед циклом, вот так:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">outer: for (var i = 0; i &lt; 3; i++) { ... }</code></pre>
</div>
</div>
</div><p>Можно также выносить её на отдельную строку:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">outer:
for (var i = 0; i &lt; 3; i++) { ... }</code></pre>
</div>
</div>
</div><p>Вызов <code>break outer</code> ищет ближайший внешний цикл с такой меткой и переходит в его конец.</p>
<p>В примере выше это означает, что будет разорван самый внешний цикл и управление перейдёт на <code>alert</code>.</p>
<p>Директива <code>continue</code> также может быть использована с меткой, в этом случае управление перепрыгнет на следующую итерацию цикла с меткой.</p>
<h2><a class="main__anchor" href="#итого" name="итого">Итого</a></h2><p>JavaScript поддерживает три вида циклов:</p>
<ul>
<li><code>while</code> – проверка условия перед каждым выполнением.</li>
<li><code>do..while</code> – проверка условия после каждого выполнения.</li>
<li><code>for</code> – проверка условия перед каждым выполнением, а также дополнительные настройки.</li>
</ul>
<p>Чтобы организовать бесконечный цикл, используют конструкцию <code>while(true)</code>. При этом он, как и любой другой цикл, может быть прерван директивой <code>break</code>.</p>
<p>Если на данной итерации цикла делать больше ничего не надо, но полностью прекращать цикл не следует – используют директиву <code>continue</code>.</p>
<p>Обе этих директивы поддерживают «метки», которые ставятся перед циклом. Метки – единственный способ для <code>break/continue</code> повлиять на выполнение внешнего цикла.</p>
<p>Заметим, что метки не позволяют прыгнуть в произвольное место кода, в JavaScript нет такой возможности.</p>
</cut></div></meta></article></main></div></body></html>