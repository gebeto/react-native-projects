
		<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0">
		<link rel="stylesheet" type="text/css" href="./styles.css">
		<link rel="stylesheet" type="text/css" href="./prism.css">
		<script src="./prism.js"></script>
		</head><body><div class="page__inner"><main class="main main_width-limit"><article itemscope="" itemtype="http://schema.org/TechArticle"><meta content="Массивы с числовыми индексами" itemprop="name"><div itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta content="iliakan@gmail.com" itemprop="email"><meta content="Ilya Kantor" itemprop="name"/></meta></div><div itemprop="articleBody"><p><em>Массив</em> – разновидность объекта, которая предназначена для хранения пронумерованных значений и предлагает дополнительные методы для удобного манипулирования такой коллекцией.</p>
<p>Они обычно используются для хранения упорядоченных коллекций данных, например – списка товаров на странице, студентов в группе и т.п.</p>
<cut>
<h2><a class="main__anchor" href="#объявление" name="объявление">Объявление</a></h2><p>Синтаксис для создания нового массива – квадратные скобки со списком элементов внутри.</p>
<p>Пустой массив:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var arr = [];</code></pre>
</div>
</div>
</div><p>Массив <code>fruits</code> с тремя элементами:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var fruits = ["Яблоко", "Апельсин", "Слива"];</code></pre>
</div>
</div>
</div><p><strong>Элементы нумеруются, начиная с нуля.</strong></p>
<p>Чтобы получить нужный элемент из массива – указывается его номер в квадратных скобках:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var fruits = ["Яблоко", "Апельсин", "Слива"];

alert( fruits[0] ); // Яблоко
alert( fruits[1] ); // Апельсин
alert( fruits[2] ); // Слива</code></pre>
</div>
</div>
</div><p>Элемент можно всегда заменить:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">fruits[2] = 'Груша'; // теперь ["Яблоко", "Апельсин", "Груша"]</code></pre>
</div>
</div>
</div><p>…Или добавить:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">fruits[3] = 'Лимон'; // теперь ["Яблоко", "Апельсин", "Груша", "Лимон"]</code></pre>
</div>
</div>
</div><p>Общее число элементов, хранимых в массиве, содержится в его свойстве <code>length</code>:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var fruits = ["Яблоко", "Апельсин", "Груша"];

alert( fruits.length ); // 3</code></pre>
</div>
</div>
</div><p><strong>Через <code>alert</code> можно вывести и массив целиком.</strong></p>
<p>При этом его элементы будут перечислены через запятую:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var fruits = ["Яблоко", "Апельсин", "Груша"];

alert( fruits ); // Яблоко,Апельсин,Груша</code></pre>
</div>
</div>
</div><p><strong>В массиве может храниться любое число элементов любого типа.</strong></p>
<p>В том числе, строки, числа, объекты, вот например:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">// микс значений
var arr = [ 1, 'Имя', { name: 'Петя' }, true ];

// получить объект из массива и тут же -- его свойство
alert( arr[2].name ); // Петя</code></pre>
</div>
</div>
</div><h2><a class="main__anchor" href="#методы-pop-push-shift-unshift" name="методы-pop-push-shift-unshift">Методы pop/push, shift/unshift</a></h2><p>Одно из применений массива – это <a href="http://ru.wikipedia.org/wiki/%D0%9E%D1%87%D0%B5%D1%80%D0%B5%D0%B4%D1%8C_%28%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%29">очередь</a>. В классическом программировании так называют упорядоченную коллекцию элементов, такую что элементы добавляются в конец, а обрабатываются – с начала.</p>
<figure><div class="image" style="width:187px">
<div class="image__ratio" style="padding-top:57.75401069518716%"></div>
<img alt="" class="image__image" height="108" src="article/array/queue.png" width="187">
</img></div></figure><p>В реальной жизни эта структура данных встречается очень часто. Например, очередь сообщений, которые надо показать на экране.</p>
<p>Очень близка к очереди еще одна структура данных: <a href="http://ru.wikipedia.org/wiki/%D0%A1%D1%82%D0%B5%D0%BA">стек</a>. Это такая коллекция элементов, в которой новые элементы добавляются в конец и берутся с конца.</p>
<figure><div class="image" style="width:145px">
<div class="image__ratio" style="padding-top:102.75862068965517%"></div>
<img alt="" class="image__image" height="149" src="article/array/stack.png" width="145">
</img></div></figure><p>Например, стеком является колода карт, в которую новые карты кладутся сверху, и берутся – тоже сверху.</p>
<p>Для того, чтобы реализовывать эти структуры данных, и просто для более удобной работы с началом и концом массива существуют специальные методы.</p>
<h3><a class="main__anchor" href="#конец-массива" name="конец-массива">Конец массива</a></h3><dl>
<dt><code>pop</code></dt>
<dd>
<p>Удаляет <em>последний</em> элемент из массива и возвращает его:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var fruits = ["Яблоко", "Апельсин", "Груша"];

alert( fruits.pop() ); // удалили "Груша"

alert( fruits ); // Яблоко, Апельсин</code></pre>
</div>
</div>
</div></dd>
<dt><code>push</code></dt>
<dd>
<p>Добавляет элемент <em>в конец</em> массива:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var fruits = ["Яблоко", "Апельсин"];

fruits.push("Груша");

alert( fruits ); // Яблоко, Апельсин, Груша</code></pre>
</div>
</div>
</div><p>Вызов <code>fruits.push(...)</code> равнозначен <code>fruits[fruits.length] = ...</code>.</p>
</dd>
</dl>
<h3><a class="main__anchor" href="#начало-массива" name="начало-массива">Начало массива</a></h3><dl>
<dt><code>shift</code></dt>
<dd>
<p>Удаляет из массива <em>первый</em> элемент и возвращает его:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var fruits = ["Яблоко", "Апельсин", "Груша"];

alert( fruits.shift() ); // удалили Яблоко

alert( fruits ); // Апельсин, Груша</code></pre>
</div>
</div>
</div></dd>
<dt><code>unshift</code></dt>
<dd>
<p>Добавляет элемент <em>в начало</em> массива:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var fruits = ["Апельсин", "Груша"];

fruits.unshift('Яблоко');

alert( fruits ); // Яблоко, Апельсин, Груша</code></pre>
</div>
</div>
</div></dd>
</dl>
<p>Методы <code>push</code> и <code>unshift</code> могут добавлять сразу по несколько элементов:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var fruits = ["Яблоко"];

fruits.push("Апельсин", "Персик");
fruits.unshift("Ананас", "Лимон");

// результат: ["Ананас", "Лимон", "Яблоко", "Апельсин", "Персик"]
alert( fruits );</code></pre>
</div>
</div>
</div><h2><a class="main__anchor" href="#внутреннее-устройство-массива" name="внутреннее-устройство-массива">Внутреннее устройство массива</a></h2><p>Массив – это объект, где в качестве ключей выбраны цифры, с дополнительными методами и свойством <code>length</code>.</p>
<p>Так как это объект, то в функцию он передаётся по ссылке:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">function eat(arr) {
  arr.pop();
}

var arr = ["нам", "не", "страшен", "серый", "волк"]

alert( arr.length ); // 5
eat(arr);
eat(arr);
alert( arr.length ); // 3, в функцию массив не скопирован, а передана ссылка</code></pre>
</div>
</div>
</div><p><strong>Ещё одно следствие – можно присваивать в массив любые свойства.</strong></p>
<p>Например:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var fruits = []; // создать массив

fruits[99999] = 5; // присвоить свойство с любым номером

fruits.age = 25; // назначить свойство со строковым именем</code></pre>
</div>
</div>
</div><p>… Но массивы для того и придуманы в JavaScript, чтобы удобно работать именно <em>с упорядоченными, нумерованными данными</em>. Для этого в них существуют специальные методы и свойство <code>length</code>.</p>
<p>Как правило, нет причин использовать массив как обычный объект, хотя технически это и возможно.</p>
<div class="important important_warn">
<div class="important__header"><span class="important__type">Вывод массива с «дырами»</span></div>
<div class="important__content"><p>Если в массиве есть пропущенные индексы, то при выводе в большинстве браузеров появляются «лишние» запятые, например:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var a = [];
a[0] = 0;
a[5] = 5;

alert( a ); // 0,,,,,5</code></pre>
</div>
</div>
</div><p>Эти запятые появляются потому, что алгоритм вывода массива идёт от <code>0</code> до <code>arr.length</code> и выводит всё через запятую. Отсутствие значений даёт несколько запятых подряд.</p>
</div></div>
<h3><a class="main__anchor" href="#влияние-на-быстродействие" name="влияние-на-быстродействие">Влияние на быстродействие</a></h3><p>Методы <code>push/pop</code> выполняются быстро, а <code>shift/unshift</code> – медленно.</p>
<figure><div class="image" style="width:354px">
<div class="image__ratio" style="padding-top:48.87005649717514%"></div>
<img alt="" class="image__image" height="173" src="article/array/array-speed.png" width="354">
</img></div></figure><p>Чтобы понять, почему работать с концом массива – быстрее, чем с его началом, разберём подробнее происходящее при операции:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">fruits.shift(); // убрать 1 элемент с начала</code></pre>
</div>
</div>
</div><p>При этом, так как все элементы находятся в своих ячейках, просто удалить элемент с номером <code>0</code> недостаточно. Нужно еще и переместить остальные элементы на их новые индексы.</p>
<p>Операция <code>shift</code> должна выполнить целых три действия:</p>
<ol>
<li>Удалить нулевой элемент.</li>
<li>Переместить все свойства влево, с индекса <code>1</code> на <code>0</code>, с <code>2</code> на <code>1</code> и так далее.</li>
<li>Обновить свойство <code>length</code>.</li>
</ol>
<figure><div class="image" style="width:610px">
<div class="image__ratio" style="padding-top:28.688524590163933%"></div>
<img alt="" class="image__image" height="175" src="article/array/array-shift.png" width="610">
</img></div></figure><p><strong>Чем больше элементов в массиве, тем дольше их перемещать, это много операций с памятью.</strong></p>
<p>Аналогично работает <code>unshift</code>: чтобы добавить элемент в начало массива, нужно сначала перенести вправо, в увеличенные индексы, все существующие.</p>
<p>А что же с <code>push/pop</code>? Им как раз перемещать ничего не надо. Для того, чтобы удалить элемент, метод <code>pop</code> очищает ячейку и укорачивает <code>length</code>.</p>
<p>Действия при операции:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">fruits.pop(); // убрать 1 элемент с конца</code></pre>
</div>
</div>
</div><figure><div class="image" style="width:479px">
<div class="image__ratio" style="padding-top:30.89770354906054%"></div>
<img alt="" class="image__image" height="148" src="article/array/array-pop.png" width="479">
</img></div></figure><p><strong>Перемещать при <code>pop</code> не требуется, так как прочие элементы после этой операции остаются на тех же индексах.</strong></p>
<p>Аналогично работает <code>push</code>.</p>
<h2><a class="main__anchor" href="#перебор-элементов" name="перебор-элементов">Перебор элементов</a></h2><p>Для перебора элементов обычно используется цикл:</p>
<div class="code-example" data-highlight-block="2-4" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var arr = ["Яблоко", "Апельсин", "Груша"];

for (var i = 0; i &lt; arr.length; i++) {
  alert( arr[i] );
}</code></pre>
</div>
</div>
</div><div class="important important_warn">
<div class="important__header"><span class="important__type">Не используйте <code>for..in</code> для массивов</span></div>
<div class="important__content"><p>Так как массив является объектом, то возможен и вариант <code>for..in</code>:</p>
<div class="code-example" data-highlight-block="2-2" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var arr = ["Яблоко", "Апельсин", "Груша"];

for (var key in arr) {
  alert( arr[key] ); // Яблоко, Апельсин, Груша
}</code></pre>
</div>
</div>
</div><p>Недостатки этого способа:</p>
<ol>
<li>
<p>Цикл <code>for..in</code> выведет <em>все свойства</em> объекта, а не только цифровые.</p>
<p>В браузере, при работе с объектами страницы, встречаются коллекции элементов, которые по виду как массивы, но имеют дополнительные нецифровые свойства. При переборе таких «похожих на массив» коллекций через <code>for..in</code> эти свойства будут выведены, а они как раз не нужны.</p>
<p>Бывают и библиотеки, которые предоставляют такие коллекции. Классический <code>for</code> надёжно выведет только цифровые свойства, что обычно и требуется.</p>
</li>
<li>
<p>Цикл <code>for (var i=0; i&lt;arr.length; i++)</code> в современных браузерах выполняется в 10-100 раз быстрее. Казалось бы, по виду он сложнее, но браузер особым образом оптимизирует такие циклы.</p>
</li>
</ol>
<p>Если коротко: цикл <code>for(var i=0; i&lt;arr.length...)</code> надёжнее и быстрее.</p>
</div></div>
<h2><a class="main__anchor" href="#особенности-работы-length" name="особенности-работы-length">Особенности работы length</a></h2><p>Встроенные методы для работы с массивом автоматически обновляют его длину <code>length</code>.</p>
<p><strong>Длина <code>length</code> – не количество элементов массива, а <code>последний индекс + 1</code></strong>.</p>
<p>Так уж оно устроено.</p>
<p>Это легко увидеть на следующем примере:</p>
<div class="code-example" data-highlight-inline="3:22-26" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var arr = [];
arr[1000] = true;

alert(arr.length); // 1001</code></pre>
</div>
</div>
</div><p>Кстати, если у вас элементы массива нумеруются случайно или с большими пропусками, то стоит подумать о том, чтобы использовать обычный объект. Массивы предназначены именно для работы с непрерывной упорядоченной коллекцией элементов.</p>
<h3><a class="main__anchor" href="#используем-length-для-укорачивания-массива" name="используем-length-для-укорачивания-массива">Используем length для укорачивания массива</a></h3><p>Обычно нам не нужно самостоятельно менять <code>length</code>… Но есть один фокус, который можно провернуть.</p>
<p><strong>При уменьшении <code>length</code> массив укорачивается.</strong></p>
<p>Причем этот процесс необратимый, т.е. даже если потом вернуть <code>length</code> обратно – значения не восстановятся:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var arr = [1, 2, 3, 4, 5];

arr.length = 2; // укоротить до 2 элементов
alert( arr ); // [1, 2]

arr.length = 5; // вернуть length обратно, как было
alert( arr[3] ); // undefined: значения не вернулись</code></pre>
</div>
</div>
</div><p>Самый простой способ очистить массив – это <code>arr.length=0</code>.</p>
<h2><a class="main__anchor" href="#new-array" name="new-array">Создание вызовом new Array</a></h2><h3><a class="main__anchor" href="#new-array-2" name="new-array-2">new Array()</a></h3><p>Существует еще один синтаксис для создания массива:</p>
<div class="code-example" data-highlight-inline="0:10-19" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var arr = new Array("Яблоко", "Груша", "и т.п.");</code></pre>
</div>
</div>
</div><p>Он редко используется, т.к. квадратные скобки <code>[]</code> короче.</p>
<p>Кроме того, у него есть одна особенность. Обычно <code>new Array(элементы, ...)</code> создаёт массив из данных элементов, но если у него один аргумент-число <code>new Array(число)</code>, то он создает массив <em>без элементов, но с заданной длиной</em>.</p>
<p>Проверим это:</p>
<div class="code-example" data-highlight-block="3-4" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var arr = new Array(2, 3);
alert( arr[0] ); // 2, создан массив [2, 3], всё ок

arr = new Array(2); // создаст массив [2] ?
alert( arr[0] ); // undefined! у нас массив без элементов, длины 2</code></pre>
</div>
</div>
</div><p>Что же такое этот «массив без элементов, но с длиной»? Как такое возможно?</p>
<p>Оказывается, очень даже возможно и соответствует объекту <code>{length: 2}</code>. Получившийся массив ведёт себя так, как будто его элементы равны <code>undefined</code>.</p>
<p>Это может быть неожиданным сюрпризом, поэтому обычно используют квадратные скобки.</p>
<h3><a class="main__anchor" href="#многомерные-массивы" name="многомерные-массивы">Многомерные массивы</a></h3><p>Массивы в JavaScript могут содержать в качестве элементов другие массивы. Это можно использовать для создания многомерных массивов, например матриц:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var matrix = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, 9]
];

alert( matrix[1][1] ); // центральный элемент</code></pre>
</div>
</div>
</div><h2><a class="main__anchor" href="#внутреннее-представление-массивов" name="внутреннее-представление-массивов">Внутреннее представление массивов</a></h2><div class="important important_warn">
<div class="important__header"><span class="important__type">Hardcore coders only</span></div>
<div class="important__content"><p>Эта секция относится ко внутреннему устройству структуры данных и требует специальных знаний. Она не обязательна к прочтению.</p>
</div></div>
<p>Числовые массивы, согласно спецификации, являются объектами, в которые добавили ряд свойств, методов и автоматическую длину <code>length</code>. Но внутри они, как правило, устроены по-другому.</p>
<p><strong>Современные интерпретаторы стараются оптимизировать их и хранить в памяти не в виде хэш-таблицы, а в виде непрерывной области памяти, по которой легко пробежаться от начала до конца.</strong></p>
<p>Операции с массивами также оптимизируются, особенно если массив хранит только один тип данных, например только числа. Порождаемый набор инструкций для процессора получается очень эффективным.</p>
<p>Чтобы у интерпретатора получались эти оптимизации, программист не должен мешать.</p>
<p>В частности:</p>
<ul>
<li>Не ставить массиву произвольные свойства, такие как <code>arr.test = 5</code>. То есть, работать именно как с массивом, а не как с объектом.</li>
<li>Заполнять массив непрерывно и по возрастающей. Как только браузер встречает необычное поведение массива, например устанавливается значение <code>arr[0]</code>, а потом сразу <code>arr[1000]</code>, то он начинает работать с ним, как с обычным объектом. Как правило, это влечёт преобразование его в хэш-таблицу.</li>
</ul>
<p>Если следовать этим принципам, то массивы будут занимать меньше памяти и быстрее работать.</p>
<h2><a class="main__anchor" href="#итого" name="итого">Итого</a></h2><p>Массивы существуют для работы с упорядоченным набором элементов.</p>
<p><strong>Объявление:</strong></p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">// предпочтительное
var arr = [элемент1, элемент2...];

// new Array
var arr = new Array(элемент1, элемент2...);</code></pre>
</div>
</div>
</div><p>При этом <code>new Array(число)</code> создаёт массив заданной длины, <em>без элементов</em>. Чтобы избежать ошибок, предпочтителен первый синтаксис.</p>
<p><strong>Свойство <code>length</code></strong> – длина массива. Если точнее, то последний индекс массива плюс <code>1</code>. Если её уменьшить вручную, то массив укоротится. Если <code>length</code> больше реального количества элементов, то отсутствующие элементы равны <code>undefined</code>.</p>
<p>Массив можно использовать как очередь или стек.</p>
<p><strong>Операции с концом массива:</strong></p>
<ul>
<li><code>arr.push(элемент1, элемент2...)</code> добавляет элементы в конец.</li>
<li><code>var elem = arr.pop()</code> удаляет и возвращает последний элемент.</li>
</ul>
<p><strong>Операции с началом массива:</strong></p>
<ul>
<li><code>arr.unshift(элемент1, элемент2...)</code> добавляет элементы в начало.</li>
<li><code>var elem = arr.shift()</code> удаляет и возвращает первый элемент.</li>
</ul>
<p>Эти операции перенумеровывают все элементы, поэтому работают медленно.</p>
<p>В следующей главе мы рассмотрим другие методы для работы с массивами.</p>
</cut></div></meta></article></main></div></body></html>