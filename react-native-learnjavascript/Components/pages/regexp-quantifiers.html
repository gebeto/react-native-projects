
		<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0">
		<link rel="stylesheet" type="text/css" href="./styles.css">
		<link rel="stylesheet" type="text/css" href="./prism.css">
		<script src="./prism.js"></script>
		</head><body><div class="page__inner"><main class="main main_width-limit"><article itemscope="" itemtype="http://schema.org/TechArticle"><meta content="Квантификаторы +, *, ? и {n}" itemprop="name"><div itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta content="iliakan@gmail.com" itemprop="email"><meta content="Ilya Kantor" itemprop="name"/></meta></div><div itemprop="articleBody"><p>Рассмотрим ту же задачу, что и ранее – взять телефон вида <code>+7(903)-123-45-67</code> и найти все числа в нём. Но теперь нас интересуют не цифры по отдельности, а именно числа, то есть результат вида <code>7, 903, 123, 45, 67</code>.</p>
<p>Для поиска цифр по отдельности нам было достаточно класса <code>\d</code>. Но здесь нужно искать <em>числа</em> – последовательности из 1 или более цифр.</p>
<h2><a class="main__anchor" href="#количество-n" name="количество-n">Количество {n}</a></h2><p>Количество повторений символа можно указать с помощью числа в фигурных скобках: <code>{n}</code>.</p>
<p>Такое указание называют <em>квантификатором</em> (от англ. quantifier).</p>
<p>У него есть несколько подформ записи:</p>
<dl>
<dt>Точное количество: <code>{5}</code></dt>
<dd>
<p>Регэксп <code class="pattern">\d{5}</code> обозначает ровно 5 цифр, в точности как <code class="pattern">\d\d\d\d\d</code>.</p>
<p>Следующий пример находит пятизначное число.</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">alert( "Мне 12345 лет".match(/\d{5}/) ); //  "12345"</code></pre>
</div>
</div>
</div></dd>
<dt>Количество от-до: <code>{3,5}</code></dt>
<dd>
<p>Для того, чтобы найти, например, числа размером от трёх до пяти знаков, нужно указать границы в фигурных скобках: <code class="pattern">\d{3,5}</code></p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">alert( "Мне не 12, а 1234 года".match(/\d{3,5}/) ); // "1234"</code></pre>
</div>
</div>
</div><p>Последнее значение можно и не указывать. Тогда выражение <code class="pattern">\d{3,}</code> найдет числа, длиной от трех цифр:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">alert( "Мне не 12, а 345678 лет".match(/\d{3,}/) ); // "345678"</code></pre>
</div>
</div>
</div></dd>
</dl>
<p>В случае с телефоном нам нужны числа – одна или более цифр подряд. Этой задаче соответствует регулярное выражение <code class="pattern">\d{1,}</code>:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var str = "+7(903)-123-45-67";

alert( str.match(/\d{1,}/g) ); // 7,903,123,45,67</code></pre>
</div>
</div>
</div><h2><a class="main__anchor" href="#короткие-обозначения" name="короткие-обозначения">Короткие обозначения</a></h2><p>Для самых часто востребованных квантификаторов есть специальные короткие обозначения.</p>
<dl>
<dt><code>+</code></dt>
<dd>
<p>Означает «один или более», то же что <code>{1,}</code>.</p>
<p>Например, <code class="pattern">\d+</code> находит числа – последовательности из 1 или более цифр:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var str = "+7(903)-123-45-67";

alert( str.match(/\d+/g) ); // 7,903,123,45,67</code></pre>
</div>
</div>
</div></dd>
<dt><code>?</code></dt>
<dd>
<p>Означает «ноль или один», то же что и <code>{0,1}</code>. По сути, делает символ необязательным.</p>
<p>Например, регэксп <code class="pattern">ou?r</code> найдёт <code class="match">o</code>, после которого, возможно, следует <code class="match">u</code>, а затем <code class="match">r</code>.</p>
<p>Этот регэксп найдёт <code class="match">or</code> в слове <code class="subject">color</code> и <code class="match">our</code> в <code class="subject">colour</code>:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">var str = "Можно писать color или colour (британский вариант)";

alert( str.match(/colou?r/g) ); // color, colour</code></pre>
</div>
</div>
</div></dd>
<dt><code>*</code></dt>
<dd>
<p>Означает «ноль или более», то же что <code>{0,}</code>. То есть, символ может повторяться много раз или вообще отсутствовать.</p>
<p>Пример ниже находит цифру, после которой идёт один или более нулей:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">alert( "100 10 1".match(/\d0*/g) ); // 100, 10, 1</code></pre>
</div>
</div>
</div><p>Сравните это с <code>'+'</code> (один или более):</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">alert( "100 10 1".match(/\d0+/g) ); // 100, 10</code></pre>
</div>
</div>
</div></dd>
</dl>
<h2><a class="main__anchor" href="#ещё-примеры" name="ещё-примеры">Ещё примеры</a></h2><p>Эти квантификаторы принадлежат к числу самых важных «строительных блоков» для сложных регулярных выражений, поэтому мы рассмотрим ещё примеры.</p>
<dl>
<dt>Регэксп «десятичная дробь» (число с точкой внутри): <code class="pattern">\d+\.\d+</code></dt>
<dd>
<p>В действии:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">alert( "0 1 12.345 7890".match(/\d+\.\d+/g) ); // 12.345</code></pre>
</div>
</div>
</div></dd>
<dt>Регэксп «открывающий HTML-тег без атрибутов», такой как <code>&lt;span&gt;</code> или <code>&lt;p&gt;</code>: <code class="pattern">/&lt;[a-z]+&gt;/i</code></dt>
<dd>
<p>Пример:</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">alert( "&lt;BODY&gt; ... &lt;/BODY&gt;".match(/&lt;[a-z]+&gt;/gi) ); // &lt;BODY&gt;</code></pre>
</div>
</div>
</div><p>Это регулярное выражение ищет символ <code class="pattern">'&lt;'</code>, за которым идут одна или более букв английского алфавита, и затем <code class="pattern">'&gt;'</code>.</p>
</dd>
<dt>Регэксп «открывающий HTML-тег без атрибутов» (лучше): <code class="pattern">/&lt;[a-z][a-z0-9]*&gt;/i</code></dt>
<dd>
<p>Здесь регулярное выражение расширено: в соответствие со стандартом, HTML-тег может иметь символ цифры на любой позиции, кроме первой, например <code>&lt;h1&gt;</code>.</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">alert( "&lt;h1&gt;Привет!&lt;/h1&gt;".match(/&lt;[a-z][a-z0-9]*&gt;/gi) ); // &lt;h1&gt;</code></pre>
</div>
</div>
</div></dd>
<dt>Регэксп «открывающий или закрывающий HTML-тег без атрибутов»: <code class="pattern">/&lt;\/?[a-z][a-z0-9]*&gt;/i</code></dt>
<dd>
<p>В предыдущий паттерн добавили необязательный слэш <code class="pattern">/?</code> перед тегом. Его понадобилось заэкранировать, чтобы JavaScript не принял его за конец шаблона.</p>
<div class="code-example" data-trusted="1">
<div class="codebox code-example__codebox">
<div class="toolbar codebox__toolbar">
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_run" data-action="run" href="#" title="выполнить"></a>
</div>
<div class="toolbar__tool">
<a class="toolbar__button toolbar__button_edit" data-action="edit" href="#" target="_blank" title="открыть в песочнице"></a>
</div>
</div>
<div class="codebox__code" data-code="1">
<pre class="line-numbers language-javascript"><code class="language-javascript">alert( "&lt;h1&gt;Привет!&lt;/h1&gt;".match(/&lt;\/?[a-z][a-z0-9]*&gt;/gi) ); // &lt;h1&gt;, &lt;/h1&gt;</code></pre>
</div>
</div>
</div></dd>
</dl>
<div class="important important_smart">
<div class="important__header"><span class="important__type">Точнее – значит сложнее</span></div>
<div class="important__content"><p>В этих примерах мы видим общее правило, которое повторяется из раза в раз: чем точнее регулярное выражение, тем оно длиннее и сложнее.</p>
<p>Например, для HTML-тегов, скорее всего, подошло бы и более короткое регулярное выражение <code class="pattern">&lt;\w+&gt;</code>.</p>
<p>Так как класс <code>\w</code> означает "любая цифра или английская буква или <code>'_'</code>, то под такой регэксп подойдут и не теги, например <code class="match">&lt;_&gt;</code>. Однако он гораздо проще, чем более точный регэксп <code class="pattern">&lt;[a-z][a-z0-9]*&gt;</code>.</p>
<p>Подойдёт ли нам <code class="pattern">&lt;\w+&gt;</code> или нужно использовать именно <code class="pattern">&lt;[a-z][a-z0-9]*&gt;</code>?</p>
<p>В реальной жизни допустимы оба варианта. Ответ на подобные вопросы зависит от того, насколько реально важна точность и насколько сложно потом будет отфильтровать лишние совпадения (если появятся).</p>
</div></div>
</div></meta></article></main></div></body></html>